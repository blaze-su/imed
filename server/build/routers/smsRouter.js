'use strict';var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{'default':mod};};Object.defineProperty(exports,'__esModule',{value:true});exports.smsRouter=void 0;const keys_1=require('../keys');const express_1=require('express');const body_parser_1=__importDefault(require('body-parser'));const node_fetch_1=__importDefault(require('node-fetch'));const smsRouter=express_1.Router();exports.smsRouter=smsRouter;smsRouter.use(body_parser_1.default.json());smsRouter.route('/sms/').post((req,res,next)=>{let {msn}=req.body;msn=msn.replace('+7','8');const url=`https://sms.ru/sms/send?api_id=${keys_1.SMS_API}&to=${keys_1.SMS_PHONE}&msg=${msn}&json=1`;const encodedURI=encodeURI(url);node_fetch_1.default(encodedURI).then(()=>{res.json({stsus:'OK',error:''});}).catch(err=>next(err));});